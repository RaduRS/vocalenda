ğŸ“¨ Received Deepgram JSON message: {"type":"ConversationText","role":"assistant","content":"It seems I couldn't retrieve the available slots for that day at the moment."}...
Message string: {"type":"ConversationText","role":"assistant","content":"It seems I couldn't retrieve the available slots for that day at the moment."}
[2025-09-07T08:41:09.531Z] ğŸ“¨ JSON MESSAGE FROM DEEPGRAM: {"type":"ConversationText","role":"assistant","content":"It seems I couldn't retrieve the available slots for that day at the moment."}
[2025-09-07T08:41:09.531Z] === PARSED DEEPGRAM JSON ===
{
  "type": "ConversationText",
  "role": "assistant",
  "content": "It seems I couldn't retrieve the available slots for that day at the moment."
}
[2025-09-07T08:41:09.531Z] === END PARSED JSON ===
[2025-09-07T08:41:09.531Z] ğŸ¯ DEEPGRAM EVENT TYPE: ConversationText
[2025-09-07T08:41:09.531Z] ğŸ’­ CONVERSATION_TEXT: It seems I couldn't retrieve the available slots for that day at the moment.
ğŸ“¨ Received Deepgram JSON message: {"type":"History","role":"assistant","content":"It seems I couldn't retrieve the available slots for that day at the moment."}...
Message string: {"type":"History","role":"assistant","content":"It seems I couldn't retrieve the available slots for that day at the moment."}
[2025-09-07T08:41:09.531Z] ğŸ“¨ JSON MESSAGE FROM DEEPGRAM: {"type":"History","role":"assistant","content":"It seems I couldn't retrieve the available slots for that day at the moment."}
[2025-09-07T08:41:09.531Z] === PARSED DEEPGRAM JSON ===
{
  "type": "History",
  "role": "assistant",
  "content": "It seems I couldn't retrieve the available slots for that day at the moment."
}
[2025-09-07T08:41:09.531Z] === END PARSED JSON ===
[2025-09-07T08:41:09.531Z] ğŸ¯ DEEPGRAM EVENT TYPE: History
[2025-09-07T08:41:09.531Z] â“ UNKNOWN_EVENT_TYPE: History
[2025-09-07T08:41:09.531Z] ğŸ“¦ Full message: {
  "type": "History",
  "role": "assistant",
  "content": "It seems I couldn't retrieve the available slots for that day at the moment."
}
[2025-09-07T08:41:09.531Z] ğŸµ Starting audio stream - feeding buffer
[2025-09-07T08:41:10.876Z] ğŸ”‡ Audio stream ended (timeout)
ğŸ“¨ Received Deepgram JSON message: {"type":"ConversationText","role":"assistant","content":"Would you like to try a different time or another day for your beard trim?"}...
Message string: {"type":"ConversationText","role":"assistant","content":"Would you like to try a different time or another day for your beard trim?"}
[2025-09-07T08:41:13.053Z] ğŸ“¨ JSON MESSAGE FROM DEEPGRAM: {"type":"ConversationText","role":"assistant","content":"Would you like to try a different time or another day for your beard trim?"}
[2025-09-07T08:41:13.053Z] === PARSED DEEPGRAM JSON ===
{
  "type": "ConversationText",
  "role": "assistant",
  "content": "Would you like to try a different time or another day for your beard trim?"
}
[2025-09-07T08:41:13.053Z] === END PARSED JSON ===
[2025-09-07T08:41:13.053Z] ğŸ¯ DEEPGRAM EVENT TYPE: ConversationText
[2025-09-07T08:41:13.053Z] ğŸ’­ CONVERSATION_TEXT: Would you like to try a different time or another day for your beard trim?
ğŸ“¨ Received Deepgram JSON message: {"type":"History","role":"assistant","content":"Would you like to try a different time or another day for your beard trim?"}...
Message string: {"type":"History","role":"assistant","content":"Would you like to try a different time or another day for your beard trim?"}
[2025-09-07T08:41:13.053Z] ğŸ“¨ JSON MESSAGE FROM DEEPGRAM: {"type":"History","role":"assistant","content":"Would you like to try a different time or another day for your beard trim?"}
[2025-09-07T08:41:13.053Z] === PARSED DEEPGRAM JSON ===
{
  "type": "History",
  "role": "assistant",
  "content": "Would you like to try a different time or another day for your beard trim?"
}
[2025-09-07T08:41:13.053Z] === END PARSED JSON ===
[2025-09-07T08:41:13.053Z] ğŸ¯ DEEPGRAM EVENT TYPE: History
[2025-09-07T08:41:13.053Z] â“ UNKNOWN_EVENT_TYPE: History
[2025-09-07T08:41:13.053Z] ğŸ“¦ Full message: {
  "type": "History",
  "role": "assistant",
  "content": "Would you like to try a different time or another day for your beard trim?"
}
[2025-09-07T08:41:13.053Z] ğŸµ Starting audio stream - feeding buffer
[2025-09-07T08:41:13.154Z] ğŸ’“ KEEPALIVE: Sent to Deepgram
ğŸ“¨ Received Deepgram JSON message: {"type":"AgentAudioDone"}...
Message string: {"type":"AgentAudioDone"}
[2025-09-07T08:41:13.206Z] ğŸ“¨ JSON MESSAGE FROM DEEPGRAM: {"type":"AgentAudioDone"}
[2025-09-07T08:41:13.206Z] === PARSED DEEPGRAM JSON ===
{
  "type": "AgentAudioDone"
}
[2025-09-07T08:41:13.206Z] === END PARSED JSON ===
[2025-09-07T08:41:13.206Z] ğŸ¯ DEEPGRAM EVENT TYPE: AgentAudioDone
[2025-09-07T08:41:13.206Z] ğŸ”‡ AGENT_AUDIO_DONE: AI finished sending audio
[2025-09-07T08:41:13.206Z] â° SILENCE_START: Beginning silence tracking after AI speech
[2025-09-07T08:41:13.206Z] âœ… Agent speech ended. Pacer will now send silence until next utterance.
[2025-09-07T08:41:13.206Z] ğŸ”‡ SILENCE_CHECK: 1001ms of silence
[2025-09-07T08:41:13.206Z] ğŸ”‡ SILENCE_CHECK: 2002ms of silence
[2025-09-07T08:41:13.206Z] ğŸ”‡ SILENCE_CHECK: 3002ms of silence
[2025-09-07T08:41:17.154Z] ğŸ’“ KEEPALIVE: Sent to Deepgram
[2025-09-07T08:41:13.206Z] ğŸ”‡ SILENCE_CHECK: 4002ms of silence
[2025-09-07T08:41:13.206Z] ğŸ”‡ SILENCE_CHECK: 5002ms of silence
[2025-09-07T08:41:13.206Z] ğŸ”‡ SILENCE_CHECK: 6003ms of silence
[2025-09-07T08:41:13.206Z] ğŸ”‡ SILENCE_CHECK: 7005ms of silence
[2025-09-07T08:41:21.154Z] ğŸ’“ KEEPALIVE: Sent to Deepgram
[2025-09-07T08:41:13.206Z] ğŸ”‡ SILENCE_CHECK: 8005ms of silence
ğŸ“¨ Received Deepgram JSON message: {"type":"UserStartedSpeaking"}...
Message string: {"type":"UserStartedSpeaking"}
[2025-09-07T08:41:21.705Z] ğŸ“¨ JSON MESSAGE FROM DEEPGRAM: {"type":"UserStartedSpeaking"}
[2025-09-07T08:41:21.705Z] === PARSED DEEPGRAM JSON ===
{
  "type": "UserStartedSpeaking"
}
[2025-09-07T08:41:21.705Z] === END PARSED JSON ===
[2025-09-07T08:41:21.705Z] ğŸ¯ DEEPGRAM EVENT TYPE: UserStartedSpeaking
[2025-09-07T08:41:21.705Z] ğŸ¤ USER_STARTED_SPEAKING: User began speaking
[2025-09-07T08:41:21.705Z] ğŸ”„ SILENCE_RESET: User speaking, silence tracking reset
ğŸ“¨ Received Deepgram JSON message: {"type":"ConversationText","role":"user","content":"Let's say eleven AM."}...
Message string: {"type":"ConversationText","role":"user","content":"Let's say eleven AM."}
[2025-09-07T08:41:24.348Z] ğŸ“¨ JSON MESSAGE FROM DEEPGRAM: {"type":"ConversationText","role":"user","content":"Let's say eleven AM."}
[2025-09-07T08:41:24.348Z] === PARSED DEEPGRAM JSON ===
{
  "type": "ConversationText",
  "role": "user",
  "content": "Let's say eleven AM."
}
[2025-09-07T08:41:24.348Z] === END PARSED JSON ===
[2025-09-07T08:41:24.348Z] ğŸ¯ DEEPGRAM EVENT TYPE: ConversationText
[2025-09-07T08:41:24.348Z] ğŸ’­ CONVERSATION_TEXT: Let's say eleven AM.
ğŸ“¨ Received Deepgram JSON message: {"type":"History","role":"user","content":"Let's say eleven AM."}...
Message string: {"type":"History","role":"user","content":"Let's say eleven AM."}
[2025-09-07T08:41:24.358Z] ğŸ“¨ JSON MESSAGE FROM DEEPGRAM: {"type":"History","role":"user","content":"Let's say eleven AM."}
[2025-09-07T08:41:24.358Z] === PARSED DEEPGRAM JSON ===
{
  "type": "History",
  "role": "user",
  "content": "Let's say eleven AM."
}
[2025-09-07T08:41:24.358Z] === END PARSED JSON ===
[2025-09-07T08:41:24.358Z] ğŸ¯ DEEPGRAM EVENT TYPE: History
[2025-09-07T08:41:24.358Z] â“ UNKNOWN_EVENT_TYPE: History
[2025-09-07T08:41:24.358Z] ğŸ“¦ Full message: {
  "type": "History",
  "role": "user",
  "content": "Let's say eleven AM."
}
[2025-09-07T08:41:25.155Z] ğŸ’“ KEEPALIVE: Sent to Deepgram
ğŸ“¨ Received Deepgram JSON message: {"type":"FunctionCallRequest","functions":[{"id":"call_WiIKCVV8hNrzCGDEVv1SFYVt","name":"get_available_slots","arguments":"{\"date\":\"2025-09-10\"}","client_side":true}]}...
Message string: {"type":"FunctionCallRequest","functions":[{"id":"call_WiIKCVV8hNrzCGDEVv1SFYVt","name":"get_available_slots","arguments":"{\"date\":\"2025-09-10\"}","client_side":true}]}
[2025-09-07T08:41:25.281Z] ğŸ“¨ JSON MESSAGE FROM DEEPGRAM: {"type":"FunctionCallRequest","functions":[{"id":"call_WiIKCVV8hNrzCGDEVv1SFYVt","name":"get_available_slots","arguments":"{\"date\":\"2025-09-10\"}","client_side":true}]}
[2025-09-07T08:41:25.281Z] === PARSED DEEPGRAM JSON ===
{
  "type": "FunctionCallRequest",
  "functions": [
    {
      "id": "call_WiIKCVV8hNrzCGDEVv1SFYVt",
      "name": "get_available_slots",
      "arguments": "{\"date\":\"2025-09-10\"}",
      "client_side": true
    }
  ]
}
[2025-09-07T08:41:25.281Z] === END PARSED JSON ===
[2025-09-07T08:41:25.281Z] ğŸ¯ DEEPGRAM EVENT TYPE: FunctionCallRequest
[2025-09-07T08:41:25.281Z] ğŸš¨ğŸš¨ FUNCTION_CALL_REQUEST DETECTED! ğŸš¨ğŸš¨
[2025-09-07T08:41:25.281Z] âœ… SUCCESS: AI requesting function calls!
[2025-09-07T08:41:25.281Z] ğŸ“‹ Functions: [
  {
    "id": "call_WiIKCVV8hNrzCGDEVv1SFYVt",
    "name": "get_available_slots",
    "arguments": "{\"date\":\"2025-09-10\"}",
    "client_side": true
  }
]
[2025-09-07T08:41:25.281Z] â¸ï¸ KEEPALIVE: Paused for function processing
[2025-09-07T08:41:25.281Z] ğŸ”§ Processing function: get_available_slots
[2025-09-07T08:41:25.281Z] ğŸ”§ CALLING: handleFunctionCall for get_available_slots...
ğŸ“ Session updated for call CA84be13962d0b54735a984ec955fb3faf: { callerPhone: '+447468306825' }
[2025-09-07T08:41:25.281Z] ğŸš€ STARTING handleFunctionCall
[2025-09-07T08:41:25.281Z] ğŸ”§ Function call received: {
  "function_name": "get_available_slots",
  "function_call_id": "call_WiIKCVV8hNrzCGDEVv1SFYVt",
  "parameters": {
    "date": "2025-09-10"
  }
}
[2025-09-07T08:41:25.281Z] ğŸ“‹ Function name: get_available_slots
[2025-09-07T08:41:25.281Z] ğŸ“Š Parameters: {
  "date": "2025-09-10"
}
[2025-09-07T08:41:25.281Z] ğŸ¢ Business config exists: true
[2025-09-07T08:41:25.281Z] ğŸŒ WebSocket state: 1
ğŸ”§ Function call received: {
  "function_name": "get_available_slots",
  "function_call_id": "call_WiIKCVV8hNrzCGDEVv1SFYVt",
  "parameters": {
    "date": "2025-09-10"
  }
}
[2025-09-07T08:41:25.281Z] ğŸš€ STARTING getAvailableSlots with params: {
  "date": "2025-09-10"
}
[2025-09-07T08:41:25.281Z] ğŸ¢ Business config: Gents Barbershop
[2025-09-07T08:41:25.281Z] ğŸ“‹ Services count: 2
[2025-09-07T08:41:25.281Z] ğŸŒ Site URL: https://www.vocalenda.com
[2025-09-07T08:41:25.281Z] ğŸ”‘ Secret exists: true
ğŸ—“ï¸ Getting available slots for: {
  "date": "2025-09-10"
}
ğŸ“… Business open on Wednesday
ğŸ“‹ Using default service: haircut (Duration: 30 minutes)
[2025-09-07T08:41:25.281Z] ğŸŒ About to make API call:
[2025-09-07T08:41:25.281Z] ğŸ”— API URL: https://www.vocalenda.com/api/calendar/slots?businessId=1bb3c552-053f-40c4-b3f2-bdb51af87b52&serviceId=e5d2c688-d01f-4085-8b4e-97215b48be75&date=2025-09-10
[2025-09-07T08:41:25.281Z] ğŸ”‘ Secret exists: true
[2025-09-07T08:41:25.281Z] ğŸ¢ Business ID: 1bb3c552-053f-40c4-b3f2-bdb51af87b52
[2025-09-07T08:41:25.281Z] ğŸ“‹ Service ID: e5d2c688-d01f-4085-8b4e-97215b48be75
[2025-09-07T08:41:25.281Z] ğŸ“… Date: 2025-09-10
[2025-09-07T08:41:25.281Z] ğŸ“¡ API Response status: 500
[2025-09-07T08:41:25.281Z] ğŸ“¡ API Response ok: false
[2025-09-07T08:41:25.281Z] ğŸ“… Calendar API response: {
  "error": "Failed to get available slots"
}
[2025-09-07T08:41:25.281Z] ğŸ“Š Response type: object
[2025-09-07T08:41:25.281Z] ğŸ“Š Has slots: false
[2025-09-07T08:41:25.281Z] ğŸ“Š Slots count: 0
âŒ Calendar API error: { error: 'Failed to get available slots' }
âœ… Sending get_available_slots response to Deepgram
âœ… Function response sent successfully to Deepgram
ğŸ”„ Waiting for Deepgram to process the response...
ğŸ“¨ Received Deepgram JSON message: {"type":"History","function_calls":[{"id":"call_WiIKCVV8hNrzCGDEVv1SFYVt","name":"get_available_slots","client_side":true,"arguments":"{\"date\":\"2025-09-10\"}","response":"{\"error\":\"Failed to get...
Message string: {"type":"History","function_calls":[{"id":"call_WiIKCVV8hNrzCGDEVv1SFYVt","name":"get_available_slots","client_side":true,"arguments":"{\"date\":\"2025-09-10\"}","response":"{\"error\":\"Failed to get available slots\"}"}]}
[2025-09-07T08:41:27.454Z] ğŸ“¨ JSON MESSAGE FROM DEEPGRAM: {"type":"History","function_calls":[{"id":"call_WiIKCVV8hNrzCGDEVv1SFYVt","name":"get_available_slots","client_side":true,"arguments":"{\"date\":\"2025-09-10\"}","response":"{\"error\":\"Failed to get available slots\"}"}]}
[2025-09-07T08:41:27.454Z] === PARSED DEEPGRAM JSON ===
{
  "type": "History",
  "function_calls": [
    {
      "id": "call_WiIKCVV8hNrzCGDEVv1SFYVt",
      "name": "get_available_slots",
      "client_side": true,
      "arguments": "{\"date\":\"2025-09-10\"}",
      "response": "{\"error\":\"Failed to get available slots\"}"
    }
  ]
}
[2025-09-07T08:41:27.454Z] === END PARSED JSON ===
[2025-09-07T08:41:27.454Z] ğŸ¯ DEEPGRAM EVENT TYPE: History
[2025-09-07T08:41:27.454Z] â“ UNKNOWN_EVENT_TYPE: History
[2025-09-07T08:41:27.454Z] ğŸ“¦ Full message: {
  "type": "History",
  "function_calls": [
    {
      "id": "call_WiIKCVV8hNrzCGDEVv1SFYVt",
      "name": "get_available_slots",
      "client_side": true,
      "arguments": "{\"date\":\"2025-09-10\"}",
      "response": "{\"error\":\"Failed to get available slots\"}"
    }
  ]
}
[2025-09-07T08:41:25.281Z] âœ… COMPLETED: handleFunctionCall for get_available_slots
[2025-09-07T08:41:28.302Z] â–¶ï¸ KEEPALIVE: Resumed after function processing
ğŸ“¨ Received Deepgram JSON message: {"type":"ConversationText","role":"assistant","content":"I'm still having trouble accessing the available times for Wednesday at the moment."}...
Message string: {"type":"ConversationText","role":"assistant","content":"I'm still having trouble accessing the available times for Wednesday at the moment."}
[2025-09-07T08:41:28.379Z] ğŸ“¨ JSON MESSAGE FROM DEEPGRAM: {"type":"ConversationText","role":"assistant","content":"I'm still having trouble accessing the available times for Wednesday at the moment."}
[2025-09-07T08:41:28.379Z] === PARSED DEEPGRAM JSON ===
{
  "type": "ConversationText",
  "role": "assistant",
  "content": "I'm still having trouble accessing the available times for Wednesday at the moment."
}
[2025-09-07T08:41:28.379Z] === END PARSED JSON ===
[2025-09-07T08:41:28.379Z] ğŸ¯ DEEPGRAM EVENT TYPE: ConversationText
[2025-09-07T08:41:28.379Z] ğŸ’­ CONVERSATION_TEXT: I'm still having trouble accessing the available times for Wednesday at the moment.
ğŸ“¨ Received Deepgram JSON message: {"type":"History","role":"assistant","content":"I'm still having trouble accessing the available times for Wednesday at the moment."}...
Message string: {"type":"History","role":"assistant","content":"I'm still having trouble accessing the available times for Wednesday at the moment."}
[2025-09-07T08:41:28.379Z] ğŸ“¨ JSON MESSAGE FROM DEEPGRAM: {"type":"History","role":"assistant","content":"I'm still having trouble accessing the available times for Wednesday at the moment."}
[2025-09-07T08:41:28.379Z] === PARSED DEEPGRAM JSON ===
{
  "type": "History",
  "role": "assistant",
  "content": "I'm still having trouble accessing the available times for Wednesday at the moment."
}
[2025-09-07T08:41:28.379Z] === END PARSED JSON ===
[2025-09-07T08:41:28.379Z] ğŸ¯ DEEPGRAM EVENT TYPE: History
[2025-09-07T08:41:28.379Z] â“ UNKNOWN_EVENT_TYPE: History
[2025-09-07T08:41:28.379Z] ğŸ“¦ Full message: {
  "type": "History",
  "role": "assistant",
  "content": "I'm still having trouble accessing the available times for Wednesday at the moment."
}
[2025-09-07T08:41:28.379Z] ğŸµ Starting audio stream - feeding buffer
[2025-09-07T08:41:29.155Z] ğŸ’“ KEEPALIVE: Sent to Deepgram