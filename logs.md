ednesday
📋 Found service by name 'haircut' -> ID: 4395775e-fa81-4a69-8425-e46c3853dea4
📋 Using service: haircut (Duration: 30 minutes)
[2025-09-15T09:52:50.257Z] 🌐 About to make API call:
[2025-09-15T09:52:50.257Z] 🔗 API URL: https://www.vocalenda.com/api/calendar/availability?businessId=1bb3c552-053f-40c4-b3f2-bdb51af87b52&serviceId=4395775e-fa81-4a69-8425-e46c3853dea4&date=2025-09-17
[2025-09-15T09:52:50.257Z] 🔑 Secret exists: true
[2025-09-15T09:52:50.257Z] 🏢 Business ID: 1bb3c552-053f-40c4-b3f2-bdb51af87b52
[2025-09-15T09:52:50.257Z] 📋 Service ID: 4395775e-fa81-4a69-8425-e46c3853dea4
[2025-09-15T09:52:50.257Z] 📅 Date: 2025-09-17
[2025-09-15T09:52:49.499Z] ✅ COMPLETED: handleFunctionCall for get_day_of_week
[2025-09-15T09:52:50.501Z] ▶️ KEEPALIVE: Resumed after function processing
[2025-09-15T09:52:49.499Z] ▶️ SILENCE: Resuming timer - Function processing completed
[2025-09-15T09:52:50.257Z] 📡 API Response status: 200
[2025-09-15T09:52:50.257Z] 📡 API Response ok: true
[2025-09-15T09:52:50.257Z] 📅 Calendar API response: {
  "slots": [
    {
      "start": "2025-09-17T08:00:00.000Z",
      "end": "2025-09-17T08:30:00.000Z",
      "startTime": "09:00",
      "endTime": "09:30"
    },
    {
      "start": "2025-09-17T08:15:00.000Z",
      "end": "2025-09-17T08:45:00.000Z",
      "startTime": "09:15",
      "endTime": "09:45"
    },
    {
      "start": "2025-09-17T08:30:00.000Z",
      "end": "2025-09-17T09:00:00.000Z",
      "startTime": "09:30",
      "endTime": "10:00"
    },
    {
      "start": "2025-09-17T08:45:00.000Z",
      "end": "2025-09-17T09:15:00.000Z",
      "startTime": "09:45",
      "endTime": "10:15"
    },
    {
      "start": "2025-09-17T09:00:00.000Z",
      "end": "2025-09-17T09:30:00.000Z",
      "startTime": "10:00",
      "endTime": "10:30"
    },
    {
      "start": "2025-09-17T09:15:00.000Z",
      "end": "2025-09-17T09:45:00.000Z",
      "startTime": "10:15",
      "endTime": "10:45"
    },
    {
      "start": "2025-09-17T09:30:00.000Z",
      "end": "2025-09-17T10:00:00.000Z",
      "startTime": "10:30",
      "endTime": "11:00"
    },
    {
      "start": "2025-09-17T09:45:00.000Z",
      "end": "2025-09-17T10:15:00.000Z",
      "startTime": "10:45",
      "endTime": "11:15"
    },
    {
      "start": "2025-09-17T10:00:00.000Z",
      "end": "2025-09-17T10:30:00.000Z",
      "startTime": "11:00",
      "endTime": "11:30"
    },
    {
      "start": "2025-09-17T10:15:00.000Z",
      "end": "2025-09-17T10:45:00.000Z",
      "startTime": "11:15",
      "endTime": "11:45"
    },
    {
      "start": "2025-09-17T10:30:00.000Z",
      "end": "2025-09-17T11:00:00.000Z",
      "startTime": "11:30",
      "endTime": "12:00"
    },
    {
      "start": "2025-09-17T10:45:00.000Z",
      "end": "2025-09-17T11:15:00.000Z",
      "startTime": "11:45",
      "endTime": "12:15"
    },
    {
      "start": "2025-09-17T11:00:00.000Z",
      "end": "2025-09-17T11:30:00.000Z",
      "startTime": "12:00",
      "endTime": "12:30"
    },
    {
      "start": "2025-09-17T11:15:00.000Z",
      "end": "2025-09-17T11:45:00.000Z",
      "startTime": "12:15",
      "endTime": "12:45"
    },
    {
      "start": "2025-09-17T12:00:00.000Z",
      "end": "2025-09-17T12:30:00.000Z",
      "startTime": "13:00",
      "endTime": "13:30"
    },
    {
      "start": "2025-09-17T12:15:00.000Z",
      "end": "2025-09-17T12:45:00.000Z",
      "startTime": "13:15",
      "endTime": "13:45"
    },
    {
      "start": "2025-09-17T12:30:00.000Z",
      "end": "2025-09-17T13:00:00.000Z",
      "startTime": "13:30",
      "endTime": "14:00"
    },
    {
      "start": "2025-09-17T13:30:00.000Z",
      "end": "2025-09-17T14:00:00.000Z",
      "startTime": "14:30",
      "endTime": "15:00"
    },
    {
      "start": "2025-09-17T14:30:00.000Z",
      "end": "2025-09-17T15:00:00.000Z",
      "startTime": "15:30",
      "endTime": "16:00"
    },
    {
      "start": "2025-09-17T14:45:00.000Z",
      "end": "2025-09-17T15:15:00.000Z",
      "startTime": "15:45",
      "endTime": "16:15"
    }
  ],
  "date": "2025-09-17",
  "businessId": "1bb3c552-053f-40c4-b3f2-bdb51af87b52",
  "serviceId": "4395775e-fa81-4a69-8425-e46c3853dea4"
}
[2025-09-15T09:52:50.257Z] 📊 Response type: object
[2025-09-15T09:52:50.257Z] 📊 Has slots: true
[2025-09-15T09:52:50.257Z] 📊 Slots count: 20
✅ Available time slots: [
  '09:00', '09:15', '09:30',
  '09:45', '10:00', '10:15',
  '10:30', '10:45', '11:00',
  '11:15', '11:30', '11:45',
  '12:00', '12:15', '13:00',
  '13:15', '13:30', '14:30',
  '15:30', '15:45'
]
✅ Sending get_available_slots response to Deepgram
✅ Function response sent successfully to Deepgram
🔄 Waiting for Deepgram to process the response...
📨 Received Deepgram JSON message: {"type":"History","function_calls":[{"id":"call_MLX6WfdwhJr8KnLpJ5XV0Z2E","name":"get_available_slots","client_side":true,"arguments":"{\"date\":\"2025-09-17\",\"service_id\":\"haircut\"}","response":...
Message string: {"type":"History","function_calls":[{"id":"call_MLX6WfdwhJr8KnLpJ5XV0Z2E","name":"get_available_slots","client_side":true,"arguments":"{\"date\":\"2025-09-17\",\"service_id\":\"haircut\"}","response":"{\"available_slots\":[\"09:00\",\"09:15\",\"09:30\",\"09:45\",\"10:00\",\"10:15\",\"10:30\",\"10:45\",\"11:00\",\"11:15\",\"11:30\",\"11:45\",\"12:00\",\"12:15\",\"13:00\",\"13:15\",\"13:30\",\"14:30\",\"15:30\",\"15:45\"]}"}]}
[2025-09-15T09:52:52.177Z] 📨 JSON MESSAGE FROM DEEPGRAM: {"type":"History","function_calls":[{"id":"call_MLX6WfdwhJr8KnLpJ5XV0Z2E","name":"get_available_slots","client_side":true,"arguments":"{\"date\":\"2025-09-17\",\"service_id\":\"haircut\"}","response":"{\"available_slots\":[\"09:00\",\"09:15\",\"09:30\",\"09:45\",\"10:00\",\"10:15\",\"10:30\",\"10:45\",\"11:00\",\"11:15\",\"11:30\",\"11:45\",\"12:00\",\"12:15\",\"13:00\",\"13:15\",\"13:30\",\"14:30\",\"15:30\",\"15:45\"]}"}]}
[2025-09-15T09:52:52.177Z] === PARSED DEEPGRAM JSON ===
{
  "type": "History",
  "function_calls": [
    {
      "id": "call_MLX6WfdwhJr8KnLpJ5XV0Z2E",
      "name": "get_available_slots",
      "client_side": true,
      "arguments": "{\"date\":\"2025-09-17\",\"service_id\":\"haircut\"}",
      "response": "{\"available_slots\":[\"09:00\",\"09:15\",\"09:30\",\"09:45\",\"10:00\",\"10:15\",\"10:30\",\"10:45\",\"11:00\",\"11:15\",\"11:30\",\"11:45\",\"12:00\",\"12:15\",\"13:00\",\"13:15\",\"13:30\",\"14:30\",\"15:30\",\"15:45\"]}"
    }
  ]
}
[2025-09-15T09:52:52.177Z] === END PARSED JSON ===
[2025-09-15T09:52:52.177Z] 🎯 DEEPGRAM EVENT TYPE: History
[2025-09-15T09:52:52.177Z] 📜 HISTORY: Message logged
[2025-09-15T09:52:52.453Z] 💓 KEEPALIVE: Sent to Deepgram
[2025-09-15T09:52:50.257Z] ✅ COMPLETED: handleFunctionCall for get_available_slots
[2025-09-15T09:52:53.029Z] ▶️ KEEPALIVE: Resumed after function processing
[2025-09-15T09:52:50.257Z] ▶️ SILENCE: Resuming timer - Function processing completed
📨 Received Deepgram JSON message: {"type":"ConversationText","role":"assistant","content":"12:45 PM on Wednesday is not available."}...
Message string: {"type":"ConversationText","role":"assistant","content":"12:45 PM on Wednesday is not available."}
[2025-09-15T09:52:53.126Z] 📨 JSON MESSAGE FROM DEEPGRAM: {"type":"ConversationText","role":"assistant","content":"12:45 PM on Wednesday is not available."}
[2025-09-15T09:52:53.126Z] === PARSED DEEPGRAM JSON ===
{
  "type": "ConversationText",
  "role": "assistant",
  "content": "12:45 PM on Wednesday is not available."
}
[2025-09-15T09:52:53.126Z] === END PARSED JSON ===
[2025-09-15T09:52:53.126Z] 🎯 DEEPGRAM EVENT TYPE: ConversationText
[2025-09-15T09:52:53.126Z] 💭 CONVERSATION_TEXT: 12:45 PM on Wednesday is not available.
[2025-09-15T09:52:53.126Z] 🔍 ConversationText role: 'assistant' -> Speaker: 'AI'
📝 TRANSCRIPT: Added AI: 12:45 PM on Wednesday is not available.
📨 Received Deepgram JSON message: {"type":"History","role":"assistant","content":"12:45 PM on Wednesday is not available."}...
Message string: {"type":"History","role":"assistant","content":"12:45 PM on Wednesday is not available."}
[2025-09-15T09:52:53.127Z] 📨 JSON MESSAGE FROM DEEPGRAM: {"type":"History","role":"assistant","content":"12:45 PM on Wednesday is not available."}
[2025-09-15T09:52:53.127Z] === PARSED DEEPGRAM JSON ===
{
  "type": "History",
  "role": "assistant",
  "content": "12:45 PM on Wednesday is not available."
}
[2025-09-15T09:52:53.127Z] === END PARSED JSON ===
[2025-09-15T09:52:53.127Z] 🎯 DEEPGRAM EVENT TYPE: History
[2025-09-15T09:52:53.127Z] 📜 HISTORY: Message logged
[2025-09-15T09:52:53.127Z] 🔍 History role: 'assistant' -> Speaker: 'AI'
📝 TRANSCRIPT: Skipping duplicate AI: 12:45 PM on Wednesday is not available.
[2025-09-15T09:52:53.127Z] 📝 Added transcript: [AI] 12:45 PM on Wednesday is not available.
[2025-09-15T09:52:53.127Z] 🎵 Starting audio stream - feeding buffer
[2025-09-15T09:52:54.735Z] 🔇 Audio stream ended (timeout)
[2025-09-15T09:52:56.454Z] 💓 KEEPALIVE: Sent to Deepgram
📨 Received Deepgram JSON message: {"type":"ConversationText","role":"assistant","content":"Available slots close to that time are 12 PM or 12:15 PM."}...
Message string: {"type":"ConversationText","role":"assistant","content":"Available slots close to that time are 12 PM or 12:15 PM."}
[2025-09-15T09:52:57.208Z] 📨 JSON MESSAGE FROM DEEPGRAM: {"type":"ConversationText","role":"assistant","content":"Available slots close to that time are 12 PM or 12:15 PM."}
[2025-09-15T09:52:57.208Z] === PARSED DEEPGRAM JSON ===
{
  "type": "ConversationText",
  "role": "assistant",
  "content": "Available slots close to that time are 12 PM or 12:15 PM."
}
[2025-09-15T09:52:57.208Z] === END PARSED JSON ===
[2025-09-15T09:52:57.208Z] 🎯 DEEPGRAM EVENT TYPE: ConversationText
[2025-09-15T09:52:57.208Z] 💭 CONVERSATION_TEXT: Available slots close to that time are 12 PM or 12:15 PM.
[2025-09-15T09:52:57.208Z] 🔍 ConversationText role: 'assistant' -> Speaker: 'AI'
📝 TRANSCRIPT: Added AI: Available slots close to that time are 12 PM or 12:15 PM.
📨 Received Deepgram JSON message: {"type":"History","role":"assistant","content":"Available slots close to that time are 12 PM or 12:15 PM."}...
Message string: {"type":"History","role":"assistant","content":"Available slots close to that time are 12 PM or 12:15 PM."}
[2025-09-15T09:52:57.208Z] 📨 JSON MESSAGE FROM DEEPGRAM: {"type":"History","role":"assistant","content":"Available slots close to that time are 12 PM or 12:15 PM."}
[2025-09-15T09:52:57.208Z] === PARSED DEEPGRAM JSON ===
{
  "type": "History",
  "role": "assistant",
  "content": "Available slots close to that time are 12 PM or 12:15 PM."
}
[2025-09-15T09:52:57.208Z] === END PARSED JSON ===
[2025-09-15T09:52:57.208Z] 🎯 DEEPGRAM EVENT TYPE: History
[2025-09-15T09:52:57.208Z] 📜 HISTORY: Message logged
[2025-09-15T09:52:57.208Z] 🔍 History role: 'assistant' -> Speaker: 'AI'
📝 TRANSCRIPT: Skipping duplicate AI: Available slots close to that time are 12 PM or 12:15 PM.
[2025-09-15T09:52:57.208Z] 📝 Added transcript: [AI] Available slots close to that time are 12 PM or 12:15 PM.
[2025-09-15T09:52:57.208Z] 🎵 Starting audio stream - feeding buffer
[2025-09-15T09:52:57.503Z] 🔇 Audio stream ended (timeout)
[2025-09-15T09:53:00.453Z] 💓 KEEPALIVE: Sent to Deepgram
📨 Received Deepgram JSON message: {"type":"ConversationText","role":"assistant","content":"Would either of those work for you?"}...
Message string: {"type":"ConversationText","role":"assistant","content":"Would either of those work for you?"}
[2025-09-15T09:53:02.330Z] 📨 JSON MESSAGE FROM DEEPGRAM: {"type":"ConversationText","role":"assistant","content":"Would either of those work for you?"}
[2025-09-15T09:53:02.330Z] === PARSED DEEPGRAM JSON ===
{
  "type": "ConversationText",
  "role": "assistant",
  "content": "Would either of those work for you?"
}
[2025-09-15T09:53:02.330Z] === END PARSED JSON ===
[2025-09-15T09:53:02.330Z] 🎯 DEEPGRAM EVENT TYPE: ConversationText
[2025-09-15T09:53:02.330Z] 💭 CONVERSATION_TEXT: Would either of those work for you?
[2025-09-15T09:53:02.330Z] 🔍 ConversationText role: 'assistant' -> Speaker: 'AI'
📝 TRANSCRIPT: Added AI: Would either of those work for you?
📨 Received Deepgram JSON message: {"type":"History","role":"assistant","content":"Would either of those work for you?"}...
Message string: {"type":"History","role":"assistant","content":"Would either of those work for you?"}
[2025-09-15T09:53:02.330Z] 📨 JSON MESSAGE FROM DEEPGRAM: {"type":"History","role":"assistant","content":"Would either of those work for you?"}
[2025-09-15T09:53:02.330Z] === PARSED DEEPGRAM JSON ===
{
  "type": "History",
  "role": "assistant",
  "content": "Would either of those work for you?"
}
[2025-09-15T09:53:02.330Z] === END PARSED JSON ===
[2025-09-15T09:53:02.330Z] 🎯 DEEPGRAM EVENT TYPE: History
[2025-09-15T09:53:02.330Z] 📜 HISTORY: Message logged
[2025-09-15T09:53:02.330Z] 🔍 History role: 'assistant' -> Speaker: 'AI'
📝 TRANSCRIPT: Skipping duplicate AI: Would either of those work for you?
[2025-09-15T09:53:02.330Z] 📝 Added transcript: [AI] Would either of those work for you?
[2025-09-15T09:53:02.330Z] 🎵 Starting audio stream - feeding buffer
📨 Received Deepgram JSON message: {"type":"AgentAudioDone"}...
Message string: {"type":"AgentAudioDone"}
[2025-09-15T09:53:02.478Z] 📨 JSON MESSAGE FROM DEEPGRAM: {"type":"AgentAudioDone"}
[2025-09-15T09:53:02.478Z] === PARSED DEEPGRAM JSON ===
{
  "type": "AgentAudioDone"
}
[2025-09-15T09:53:02.478Z] === END PARSED JSON ===
[2025-09-15T09:53:02.478Z] 🎯 DEEPGRAM EVENT TYPE: AgentAudioDone
[2025-09-15T09:53:02.478Z] 🔇 AGENT_AUDIO_DONE: AI finished sending audio
[2025-09-15T09:53:02.478Z] 🔇 SILENCE: Started tracking
[2025-09-15T09:53:02.478Z] ✅ Agent speech ended. Pacer will now send silence until next utterance.
[2025-09-15T09:53:02.478Z] 🔇 SILENCE_CHECK: 1000ms of silence
[2025-09-15T09:53:04.453Z] 💓 KEEPALIVE: Sent to Deepgram
[2025-09-15T09:53:02.478Z] 🔇 SILENCE_CHECK: 2001ms of silence
[2025-09-15T09:53:02.478Z] 🔇 SILENCE_CHECK: 3001ms of silence
📨 Received Deepgram JSON message: {"type":"UserStartedSpeaking"}...
Message string: {"type":"UserStartedSpeaking"}
[2025-09-15T09:53:05.884Z] 📨 JSON MESSAGE FROM DEEPGRAM: {"type":"UserStartedSpeaking"}
[2025-09-15T09:53:05.884Z] === PARSED DEEPGRAM JSON ===
{
  "type": "UserStartedSpeaking"
}
[2025-09-15T09:53:05.884Z] === END PARSED JSON ===
[2025-09-15T09:53:05.884Z] 🎯 DEEPGRAM EVENT TYPE: UserStartedSpeaking
[2025-09-15T09:53:05.884Z] 🎤 USER_STARTED_SPEAKING: User began speaking
[2025-09-15T09:53:05.884Z] 🔄 BARGE_IN: Cleared Twilio audio queue for user speech
[2025-09-15T09:53:05.884Z] 🔄 SILENCE_RESET: User speaking, silence tracking reset
📨 Received Deepgram JSON message: {"type":"ConversationText","role":"user","content":"Let's go for one PM."}...
Message string: {"type":"ConversationText","role":"user","content":"Let's go for one PM."}
[2025-09-15T09:53:06.746Z] 📨 JSON MESSAGE FROM DEEPGRAM: {"type":"ConversationText","role":"user","content":"Let's go for one PM."}
[2025-09-15T09:53:06.746Z] === PARSED DEEPGRAM JSON ===
{
  "type": "ConversationText",
  "role": "user",
  "content": "Let's go for one PM."
}
[2025-09-15T09:53:06.746Z] === END PARSED JSON ===
[2025-09-15T09:53:06.746Z] 🎯 DEEPGRAM EVENT TYPE: ConversationText
[2025-09-15T09:53:06.746Z] 💭 CONVERSATION_TEXT: Let's go for one PM.
[2025-09-15T09:53:06.746Z] 🔍 ConversationText role: 'user' -> Speaker: 'User'
📝 TRANSCRIPT: Added User: Let's go for one PM.
📨 Received Deepgram JSON message: {"type":"History","role":"user","content":"Let's go for one PM."}...
Message string: {"type":"History","role":"user","content":"Let's go for one PM."}
[2025-09-15T09:53:06.756Z] 📨 JSON MESSAGE FROM DEEPGRAM: {"type":"History","role":"user","content":"Let's go for one PM."}
[2025-09-15T09:53:06.756Z] === PARSED DEEPGRAM JSON ===
{
  "type": "History",
  "role": "user",
  "content": "Let's go for one PM."
}
[2025-09-15T09:53:06.756Z] === END PARSED JSON ===
[2025-09-15T09:53:06.756Z] 🎯 DEEPGRAM EVENT TYPE: History
[2025-09-15T09:53:06.756Z] 📜 HISTORY: Message logged
[2025-09-15T09:53:06.756Z] 🔍 History role: 'user' -> Speaker: 'User'
📝 TRANSCRIPT: Skipping duplicate User: Let's go for one PM.
[2025-09-15T09:53:06.756Z] 📝 Added transcript: [User] Let's go for one PM.
📨 Received Deepgram JSON message: {"type":"ConversationText","role":"assistant","content":"1 PM is not available on Wednesday."}...
Message string: {"type":"ConversationText","role":"assistant","content":"1 PM is not available on Wednesday."}
[2025-09-15T09:53:07.502Z] 📨 JSON MESSAGE FROM DEEPGRAM: {"type":"ConversationText","role":"assistant","content":"1 PM is not available on Wednesday."}
[2025-09-15T09:53:07.502Z] === PARSED DEEPGRAM JSON ===
{
  "type": "ConversationText",
  "role": "assistant",
  "content": "1 PM is not available on Wednesday."
}
[2025-09-15T09:53:07.502Z] === END PARSED JSON ===
[2025-09-15T09:53:07.502Z] 🎯 DEEPGRAM EVENT TYPE: ConversationText
[2025-09-15T09:53:07.502Z] 💭 CONVERSATION_TEXT: 1 PM is not available on Wednesday.
[2025-09-15T09:53:07.502Z] 🔍 ConversationText role: 'assistant' -> Speaker: 'AI'
📝 TRANSCRIPT: Added AI: 1 PM is not available on Wednesday.
📨 Received Deepgram JSON message: {"type":"History","role":"assistant","content":"1 PM is not available on Wednesday."}...
Message string: {"type":"History","role":"assistant","content":"1 PM is not available on Wednesday."}
[2025-09-15T09:53:07.503Z] 📨 JSON MESSAGE FROM DEEPGRAM: {"type":"History","role":"assistant","content":"1 PM is not available on Wednesday."}
[2025-09-15T09:53:07.503Z] === PARSED DEEPGRAM JSON ===
{
  "type": "History",
  "role": "assistant",
  "content": "1 PM is not available on Wednesday."
}
[2025-09-15T09:53:07.503Z] === END PARSED JSON ===
[2025-09-15T09:53:07.503Z] 🎯 DEEPGRAM EVENT TYPE: History
[2025-09-15T09:53:07.503Z] 📜 HISTORY: Message logged
[2025-09-15T09:53:07.503Z] 🔍 History role: 'assistant' -> Speaker: 'AI'
📝 TRANSCRIPT: Skipping duplicate AI: 1 PM is not available on Wednesday.
[2025-09-15T09:53:07.503Z] 📝 Added transcript: [AI] 1 PM is not available on Wednesday.
[2025-09-15T09:53:07.503Z] 🎵 Starting audio stream - feeding buffer
[2025-09-15T09:53:08.453Z] 💓 KEEPALIVE: Sent to Deepgram
[2025-09-15T09:53:08.939Z] 🔇 Audio stream ended (timeout)
📨 Received Deepgram JSON message: {"type":"ConversationText","role":"assistant","content":"The closest available times are 12:15 PM or 1 PM is not an available slot."}...
Message string: {"type":"ConversationText","role":"assistant","content":"The closest available times are 12:15 PM or 1 PM is not an available slot."}
[2025-09-15T09:53:11.224Z] 📨 JSON MESSAGE FROM DEEPGRAM: {"type":"ConversationText","role":"assistant","content":"The closest available times are 12:15 PM or 1 PM is not an available slot."}
[2025-09-15T09:53:11.224Z] === PARSED DEEPGRAM JSON ===
{
  "type": "ConversationText",
  "role": "assistant",
  "content": "The closest available times are 12:15 PM or 1 PM is not an available slot."
}
[2025-09-15T09:53:11.224Z] === END PARSED JSON ===
[2025-09-15T09:53:11.224Z] 🎯 DEEPGRAM EVENT TYPE: ConversationText