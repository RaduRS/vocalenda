Processing binary audio data from Deepgram (960 bytes)
[2025-08-31T10:25:41.583Z] ğŸ“¨ INIT: Deepgram message: ConversationText
[2025-08-31T10:25:41.583Z] ğŸ“¦ INIT: Full data: {
  "type": "ConversationText",
  "role": "assistant",
  "content": "Let me check tomorrow's availability for you."
}
[2025-08-31T10:25:41.583Z] ğŸ“¨ OTHER: Initialization message type: ConversationText
[2025-08-31T10:25:41.583Z] ğŸ“¦ OTHER: Full data: {
  "type": "ConversationText",
  "role": "assistant",
  "content": "Let me check tomorrow's availability for you."
}
[2025-08-31T10:25:41.583Z] ğŸ” RAW MESSAGE TYPE: object
[2025-08-31T10:25:41.583Z] ğŸ” IS BUFFER: true
[2025-08-31T10:25:41.583Z] ğŸ” MESSAGE LENGTH: 104
Processing binary audio data from Deepgram (104 bytes)
[2025-08-31T10:25:41.615Z] ğŸ“¨ INIT: Deepgram message: History
[2025-08-31T10:25:41.615Z] ğŸ“¦ INIT: Full data: {
  "type": "History",
  "role": "assistant",
  "content": "Let me check tomorrow's availability for you."
}
[2025-08-31T10:25:41.615Z] ğŸ“¨ OTHER: Initialization message type: History
[2025-08-31T10:25:41.615Z] ğŸ“¦ OTHER: Full data: {
  "type": "History",
  "role": "assistant",
  "content": "Let me check tomorrow's availability for you."
}
[2025-08-31T10:25:41.615Z] ğŸ” RAW MESSAGE TYPE: object
[2025-08-31T10:25:41.615Z] ğŸ” IS BUFFER: true
[2025-08-31T10:25:41.615Z] ğŸ” MESSAGE LENGTH: 95
Processing binary audio data from Deepgram (95 bytes)
[2025-08-31T10:25:41.615Z] ğŸ”Š INIT: Received binary audio from Deepgram (960 bytes)
[2025-08-31T10:25:41.615Z] ğŸ” RAW MESSAGE TYPE: object
[2025-08-31T10:25:41.615Z] ğŸ” IS BUFFER: true
[2025-08-31T10:25:41.615Z] ğŸ” MESSAGE LENGTH: 960
Processing binary audio data from Deepgram (960 bytes)
[2025-08-31T10:25:41.615Z] ğŸ”Š INIT: Received binary audio from Deepgram (960 bytes)
[2025-08-31T10:25:41.615Z] ğŸ” RAW MESSAGE TYPE: object
[2025-08-31T10:25:41.615Z] ğŸ” IS BUFFER: true
[2025-08-31T10:25:41.615Z] ğŸ” MESSAGE LENGTH: 960
Processing binary audio data from Deepgram (960 bytes)
[2025-08-31T10:25:41.615Z] ğŸ”Š INIT: Received binary audio from Deepgram (960 bytes)
[2025-08-31T10:25:41.616Z] ğŸ” RAW MESSAGE TYPE: object
[2025-08-31T10:25:41.616Z] ğŸ” IS BUFFER: true
[2025-08-31T10:25:41.616Z] ğŸ” MESSAGE LENGTH: 960
Processing binary audio data from Deepgram (960 bytes)
[2025-08-31T10:25:41.616Z] ğŸ”Š INIT: Received binary audio from Deepgram (960 bytes)
[2025-08-31T10:25:41.616Z] ğŸ” RAW MESSAGE TYPE: object
[2025-08-31T10:25:41.616Z] ğŸ” IS BUFFER: true
[2025-08-31T10:25:41.616Z] ğŸ” MESSAGE LENGTH: 960
Processing binary audio data from Deepgram (960 bytes)
[2025-08-31T10:25:41.616Z] ğŸ”Š INIT: Received binary audio from Deepgram (960 bytes)
[2025-08-31T10:25:41.616Z] ğŸ” RAW MESSAGE TYPE: object
[2025-08-31T10:25:41.616Z] ğŸ” IS BUFFER: true
[2025-08-31T10:25:41.616Z] ğŸ” MESSAGE LENGTH: 960
Processing binary audio data from Deepgram (960 bytes)
[2025-08-31T10:25:41.616Z] ğŸ”Š INIT: Received binary audio from Deepgram (960 bytes)
[2025-08-31T10:25:41.616Z] ğŸ” RAW MESSAGE TYPE: object
[2025-08-31T10:25:41.616Z] ğŸ” IS BUFFER: true
[2025-08-31T10:25:41.616Z] ğŸ” MESSAGE LENGTH: 960
Processing binary audio data from Deepgram (960 bytes)
[2025-08-31T10:25:41.616Z] ğŸ”Š INIT: Received binary audio from Deepgram (960 bytes)
[2025-08-31T10:25:41.616Z] ğŸ” RAW MESSAGE TYPE: object
[2025-08-31T10:25:41.616Z] ğŸ” IS BUFFER: true
[2025-08-31T10:25:41.616Z] ğŸ” MESSAGE LENGTH: 960
Processing binary audio data from Deepgram (960 bytes)
[2025-08-31T10:25:41.616Z] ğŸ”Š INIT: Received binary audio from Deepgram (960 bytes)
[2025-08-31T10:25:41.616Z] ğŸ” RAW MESSAGE TYPE: object
[2025-08-31T10:25:41.616Z] ğŸ” IS BUFFER: true
[2025-08-31T10:25:41.616Z] ğŸ” MESSAGE LENGTH: 960
Processing binary audio data from Deepgram (960 bytes)
[2025-08-31T10:25:41.616Z] ğŸ”Š INIT: Received binary audio from Deepgram (960 bytes)
[2025-08-31T10:25:41.616Z] ğŸ” RAW MESSAGE TYPE: object
[2025-08-31T10:25:41.616Z] ğŸ” IS BUFFER: true
[2025-08-31T10:25:41.616Z] ğŸ” MESSAGE LENGTH: 960
Processing binary audio data from Deepgram (960 bytes)
[2025-08-31T10:25:41.616Z] ğŸ”Š INIT: Received binary audio from Deepgram (960 bytes)
[2025-08-31T10:25:41.616Z] ğŸ” RAW MESSAGE TYPE: object
[2025-08-31T10:25:41.616Z] ğŸ” IS BUFFER: true
[2025-08-31T10:25:41.616Z] ğŸ” MESSAGE LENGTH: 960
Processing binary audio data from Deepgram (960 bytes)
[2025-08-31T10:25:41.701Z] ğŸ”Š INIT: Received binary audio from Deepgram (960 bytes)
[2025-08-31T10:25:41.701Z] ğŸ” RAW MESSAGE TYPE: object
[2025-08-31T10:25:41.701Z] ğŸ” IS BUFFER: true
[2025-08-31T10:25:41.701Z] ğŸ” MESSAGE LENGTH: 960
Processing binary audio data from Deepgram (960 bytes)
[2025-08-31T10:25:41.703Z] ğŸ”Š INIT: Received binary audio from Deepgram (960 bytes)
[2025-08-31T10:25:41.703Z] ğŸ” RAW MESSAGE TYPE: object
[2025-08-31T10:25:41.703Z] ğŸ” IS BUFFER: true
[2025-08-31T10:25:41.703Z] ğŸ” MESSAGE LENGTH: 960
Processing binary audio data from Deepgram (960 bytes)
[2025-08-31T10:25:41.708Z] ğŸ”Š INIT: Received binary audio from Deepgram (960 bytes)
[2025-08-31T10:25:41.708Z] ğŸ” RAW MESSAGE TYPE: object
[2025-08-31T10:25:41.708Z] ğŸ” IS BUFFER: true
[2025-08-31T10:25:41.708Z] ğŸ” MESSAGE LENGTH: 960
Processing binary audio data from Deepgram (960 bytes)
[2025-08-31T10:25:41.719Z] ğŸ”Š INIT: Received binary audio from Deepgram (960 bytes)
[2025-08-31T10:25:41.719Z] ğŸ” RAW MESSAGE TYPE: object
[2025-08-31T10:25:41.719Z] ğŸ” IS BUFFER: true
[2025-08-31T10:25:41.719Z] ğŸ” MESSAGE LENGTH: 960
Processing binary audio data from Deepgram (960 bytes)
[2025-08-31T10:25:41.921Z] ğŸ”Š INIT: Received binary audio from Deepgram (960 bytes)
[2025-08-31T10:25:41.921Z] ğŸ” RAW MESSAGE TYPE: object
[2025-08-31T10:25:41.921Z] ğŸ” IS BUFFER: true
[2025-08-31T10:25:41.921Z] ğŸ” MESSAGE LENGTH: 960
Processing binary audio data from Deepgram (960 bytes)
[2025-08-31T10:25:41.934Z] ğŸ”Š INIT: Received binary audio from Deepgram (960 bytes)
[2025-08-31T10:25:41.934Z] ğŸ” RAW MESSAGE TYPE: object
[2025-08-31T10:25:41.934Z] ğŸ” IS BUFFER: true
[2025-08-31T10:25:41.934Z] ğŸ” MESSAGE LENGTH: 960
Processing binary audio data from Deepgram (960 bytes)
[2025-08-31T10:25:41.934Z] ğŸ”Š INIT: Received binary audio from Deepgram (960 bytes)
[2025-08-31T10:25:41.934Z] ğŸ” RAW MESSAGE TYPE: object
[2025-08-31T10:25:41.934Z] ğŸ” IS BUFFER: true
[2025-08-31T10:25:41.934Z] ğŸ” MESSAGE LENGTH: 960
Processing binary audio data from Deepgram (960 bytes)
[2025-08-31T10:25:41.934Z] ğŸ”Š INIT: Received binary audio from Deepgram (960 bytes)
[2025-08-31T10:25:41.934Z] ğŸ” RAW MESSAGE TYPE: object
[2025-08-31T10:25:41.934Z] ğŸ” IS BUFFER: true
[2025-08-31T10:25:41.934Z] ğŸ” MESSAGE LENGTH: 960
Processing binary audio data from Deepgram (960 bytes)
[2025-08-31T10:25:42.135Z] ğŸ”Š INIT: Received binary audio from Deepgram (960 bytes)
[2025-08-31T10:25:42.135Z] ğŸ” RAW MESSAGE TYPE: object
[2025-08-31T10:25:42.135Z] ğŸ” IS BUFFER: true
[2025-08-31T10:25:42.135Z] ğŸ” MESSAGE LENGTH: 960
Processing binary audio data from Deepgram (960 bytes)
[2025-08-31T10:25:42.138Z] ğŸ”Š INIT: Received binary audio from Deepgram (960 bytes)
[2025-08-31T10:25:42.138Z] ğŸ” RAW MESSAGE TYPE: object
[2025-08-31T10:25:42.138Z] ğŸ” IS BUFFER: true
[2025-08-31T10:25:42.138Z] ğŸ” MESSAGE LENGTH: 960
Processing binary audio data from Deepgram (960 bytes)
[2025-08-31T10:25:42.142Z] ğŸ”Š INIT: Received binary audio from Deepgram (960 bytes)
[2025-08-31T10:25:42.142Z] ğŸ” RAW MESSAGE TYPE: object
[2025-08-31T10:25:42.142Z] ğŸ” IS BUFFER: true
[2025-08-31T10:25:42.142Z] ğŸ” MESSAGE LENGTH: 960
Processing binary audio data from Deepgram (960 bytes)
[2025-08-31T10:25:42.144Z] ğŸ”Š INIT: Received binary audio from Deepgram (320 bytes)
[2025-08-31T10:25:42.144Z] ğŸ” RAW MESSAGE TYPE: object
[2025-08-31T10:25:42.144Z] ğŸ” IS BUFFER: true
[2025-08-31T10:25:42.144Z] ğŸ” MESSAGE LENGTH: 320
Processing binary audio data from Deepgram (320 bytes)
[2025-08-31T10:25:42.144Z] ğŸ“¨ INIT: Deepgram message: AgentAudioDone
[2025-08-31T10:25:42.144Z] ğŸ“¦ INIT: Full data: {
  "type": "AgentAudioDone"
}
[2025-08-31T10:25:42.144Z] ğŸ“¨ OTHER: Initialization message type: AgentAudioDone
[2025-08-31T10:25:42.144Z] ğŸ“¦ OTHER: Full data: {
  "type": "AgentAudioDone"
}
[2025-08-31T10:25:42.145Z] ğŸ” RAW MESSAGE TYPE: object
[2025-08-31T10:25:42.145Z] ğŸ” IS BUFFER: true
[2025-08-31T10:25:42.145Z] ğŸ” MESSAGE LENGTH: 25
Processing binary audio data from Deepgram (25 bytes)
[2025-08-31T10:25:42.527Z] ğŸ’“ KEEPALIVE: Sent to Deepgram
[2025-08-31T10:25:47.526Z] ğŸ’“ KEEPALIVE: Sent to Deepgram
[2025-08-31T10:25:52.527Z] ğŸ’“ KEEPALIVE: Sent to Deepgram
[2025-08-31T10:25:57.526Z] ğŸ’“ KEEPALIVE: Sent to Deepgram
[2025-08-31T10:25:58.078Z] ğŸ“¨ INIT: Deepgram message: UserStartedSpeaking
[2025-08-31T10:25:58.078Z] ğŸ“¦ INIT: Full data: {
  "type": "UserStartedSpeaking"
}
[2025-08-31T10:25:58.078Z] ğŸ“¨ OTHER: Initialization message type: UserStartedSpeaking
[2025-08-31T10:25:58.078Z] ğŸ“¦ OTHER: Full data: {
  "type": "UserStartedSpeaking"
}
[2025-08-31T10:25:58.078Z] ğŸ” RAW MESSAGE TYPE: object
[2025-08-31T10:25:58.078Z] ğŸ” IS BUFFER: true
[2025-08-31T10:25:58.078Z] ğŸ” MESSAGE LENGTH: 30
Processing binary audio data from Deepgram (30 bytes)
     ==> Deploying...
[2025-08-31T10:25:58.953Z] ğŸ“¨ INIT: Deepgram message: ConversationText
[2025-08-31T10:25:58.953Z] ğŸ“¦ INIT: Full data: {
  "type": "ConversationText",
  "role": "user",
  "content": "Are you checking?"
}
[2025-08-31T10:25:58.953Z] ğŸ“¨ OTHER: Initialization message type: ConversationText
[2025-08-31T10:25:58.953Z] ğŸ“¦ OTHER: Full data: {
  "type": "ConversationText",
  "role": "user",
  "content": "Are you checking?"
}
[2025-08-31T10:25:58.953Z] ğŸ” RAW MESSAGE TYPE: object
[2025-08-31T10:25:58.953Z] ğŸ” IS BUFFER: true
[2025-08-31T10:25:58.953Z] ğŸ” MESSAGE LENGTH: 71
Processing binary audio data from Deepgram (71 bytes)
[2025-08-31T10:25:58.960Z] ğŸ“¨ INIT: Deepgram message: History
[2025-08-31T10:25:58.960Z] ğŸ“¦ INIT: Full data: {
  "type": "History",
  "role": "user",
  "content": "Are you checking?"
}
[2025-08-31T10:25:58.960Z] ğŸ“¨ OTHER: Initialization message type: History
[2025-08-31T10:25:58.960Z] ğŸ“¦ OTHER: Full data: {
  "type": "History",
  "role": "user",
  "content": "Are you checking?"
}
[2025-08-31T10:25:58.960Z] ğŸ” RAW MESSAGE TYPE: object
[2025-08-31T10:25:58.960Z] ğŸ” IS BUFFER: true
[2025-08-31T10:25:58.960Z] ğŸ” MESSAGE LENGTH: 62
Processing binary audio data from Deepgram (62 bytes)
[2025-08-31T10:25:59.716Z] ğŸ“¨ INIT: Deepgram message: FunctionCallRequest
[2025-08-31T10:25:59.716Z] ğŸ“¦ INIT: Full data: {
  "type": "FunctionCallRequest",
  "functions": [
    {
      "id": "call_cyOxpGYbLTq3NL7e4t6zrhni",
      "name": "get_available_slots",
      "arguments": "{\"date\":\"2025-09-01\"}",
      "client_side": true
    }
  ]
}
[2025-08-31T10:25:59.716Z] ğŸš¨ğŸš¨ FUNCTION_CALL_REQUEST in INIT! ğŸš¨ğŸš¨
[2025-08-31T10:25:59.716Z] âœ… SUCCESS: AI requesting function calls!
[2025-08-31T10:25:59.716Z] ğŸ“‹ Functions: [
  {
    "id": "call_cyOxpGYbLTq3NL7e4t6zrhni",
    "name": "get_available_slots",
    "arguments": "{\"date\":\"2025-09-01\"}",
    "client_side": true
  }
]
[2025-08-31T10:25:59.716Z] ğŸ”§ Processing function: get_available_slots
[2025-08-31T10:25:59.716Z] ğŸ”§ CALLING: handleFunctionCall for get_available_slots...
[2025-08-31T10:25:59.716Z] ğŸš€ STARTING handleFunctionCall
[2025-08-31T10:25:59.716Z] ğŸ”§ Function call received: {
  "function_name": "get_available_slots",
  "function_call_id": "call_cyOxpGYbLTq3NL7e4t6zrhni",
  "parameters": {
    "date": "2025-09-01"
  }
}
[2025-08-31T10:25:59.716Z] ğŸ“‹ Function name: get_available_slots
[2025-08-31T10:25:59.716Z] ğŸ“Š Parameters: {
  "date": "2025-09-01"
}
[2025-08-31T10:25:59.716Z] ğŸ¢ Business config exists: true
[2025-08-31T10:25:59.716Z] ğŸŒ WebSocket state: 1
ğŸ”§ Function call received: {
  "function_name": "get_available_slots",
  "function_call_id": "call_cyOxpGYbLTq3NL7e4t6zrhni",
  "parameters": {
    "date": "2025-09-01"
  }
}
[2025-08-31T10:25:59.716Z] ğŸš€ STARTING getAvailableSlots with params: {
  "date": "2025-09-01"
}
[2025-08-31T10:25:59.716Z] ğŸ¢ Business config: barber
[2025-08-31T10:25:59.716Z] ğŸ“‹ Services count: 1
[2025-08-31T10:25:59.716Z] ğŸŒ Site URL: https://vocalenda.vercel.app
[2025-08-31T10:25:59.716Z] ğŸ”‘ Secret exists: true
ğŸ—“ï¸ Getting available slots for: {
  "date": "2025-09-01"
}
ğŸ“‹ Using default service: Haricut (Duration: 30 minutes)
[2025-08-31T10:25:59.716Z] ğŸŒ About to make API call:
[2025-08-31T10:25:59.716Z] ğŸ”— API URL: https://vocalenda.vercel.app/api/calendar/slots?businessId=ff621e64-553e-4bfa-bada-ada8ee0e4308&serviceId=b65880d9-f60d-4173-87d1-83f1928453b1&date=2025-09-01
[2025-08-31T10:25:59.716Z] ğŸ”‘ Secret exists: true
[2025-08-31T10:25:59.716Z] ğŸ¢ Business ID: ff621e64-553e-4bfa-bada-ada8ee0e4308
[2025-08-31T10:25:59.716Z] ğŸ“‹ Service ID: b65880d9-f60d-4173-87d1-83f1928453b1
[2025-08-31T10:25:59.716Z] ğŸ“… Date: 2025-09-01
[2025-08-31T10:25:59.718Z] ğŸ” RAW MESSAGE TYPE: object
[2025-08-31T10:25:59.718Z] ğŸ” IS BUFFER: true
[2025-08-31T10:25:59.718Z] ğŸ” MESSAGE LENGTH: 171
Processing binary audio data from Deepgram (171 bytes)
[2025-08-31T10:25:59.716Z] ğŸ“¡ API Response status: 400
[2025-08-31T10:25:59.716Z] ğŸ“¡ API Response ok: false
[2025-08-31T10:25:59.716Z] ğŸ“… Calendar API response: {
  "error": "Business is closed on mondays"
}
[2025-08-31T10:25:59.716Z] ğŸ“Š Response type: object
[2025-08-31T10:25:59.716Z] ğŸ“Š Has slots: false
[2025-08-31T10:25:59.716Z] ğŸ“Š Slots count: 0
âŒ Calendar API error: { error: 'Business is closed on mondays' }
âœ… Sending get_available_slots response to Deepgram
âœ… Function response sent successfully to Deepgram
ğŸ”„ Waiting for Deepgram to process the response...
[2025-08-31T10:25:59.716Z] âœ… COMPLETED: handleFunctionCall for get_available_slots
[2025-08-31T10:26:02.526Z] ğŸ’“ KEEPALIVE: Sent to Deepgram
[2025-08-31T10:26:02.649Z] ğŸ“¨ INIT: Deepgram message: Error
[2025-08-31T10:26:02.649Z] ğŸ“¦ INIT: Full data: {
  "type": "Error",
  "description": "Text message received from client did not match any of the formats we expect.",
ğŸš¨ Unexpected Deepgram close - this may cause issues
  "code": "UNPARSABLE_CLIENT_MESSAGE"
}
[2025-08-31T10:26:02.649Z] ğŸ“¨ OTHER: Initialization message type: Error
[2025-08-31T10:26:02.649Z] ğŸ“¦ OTHER: Full data: {
  "type": "Error",
  "description": "Text message received from client did not match any of the formats we expect.",
  "code": "UNPARSABLE_CLIENT_MESSAGE"
}
[2025-08-31T10:26:02.649Z] ğŸ” RAW MESSAGE TYPE: object
[2025-08-31T10:26:02.649Z] ğŸ” IS BUFFER: true
[2025-08-31T10:26:02.649Z] ğŸ” MESSAGE LENGTH: 145
Processing binary audio data from Deepgram (145 bytes)
Deepgram WebSocket closed in initializeDeepgram. Code: 1005, Reason: 
Deepgram WebSocket closed. Code: 1005, Reason: 
âš ï¸ Cannot forward audio - deepgramWs ready: false, isReady: true
âš ï¸ Cannot forward audio - deepgramWs ready: false, isReady: true
âš ï¸ Cannot forward audio - deepgramWs ready: false, isReady: true
âš ï¸ Cannot forward audio - deepgramWs ready: false, isReady: true